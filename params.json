{"note":"Don't delete this file! It's used internally to help with page regeneration.","name":"Droiuby","google":"","tagline":"A framework to enable websites to render native wdigets and functionality on mobile devices using Droiuby ML and jruby instead of HTML/javascript","body":"Droiuby\r\n=======\r\n\r\nWhat is it?\r\n-----------\r\n\r\nDroiuby is an android client and framework that enables web applications to\r\nrender content on your android device using native controls. Using ruby, web\r\napplications are also able to access the devices' hardware (GPS, Camera,\r\naccelerometer) and facilitate on-device interaction using an event driven\r\nframework. A library is provided that wraps native controls that significantly\r\nsimplifies common tasks usually done in Java.\r\n\r\nAlthough its primary goal is to enable web applications to look and act like\r\nnative apps on the phone, you can still use droiuby on your existing android\r\napplications to leverage the power of ruby.\r\n\r\nHow does it work?\r\n-----------------\r\n\r\nUsing the droiuby application running on your device, it parses specially formatted\r\nwebsites that uses droiuby markup and contains ruby scripts. The markup is \r\ndesigned to correspond directly to native controls and widgets while using some\r\nfamiliar HTML constructs. To facilitate client side interaction (like javascript)\r\nthe website can use ruby scripts to handle events. Using JRuby, scripts are able\r\nto access all libraries and services available to native applications.\r\n\r\nTo allow developers to 'debug' the application (similar to the Chrome \"inspect\" and Rails Console)\r\nDroiuby opens up a webserver at port 4000 on your phone that provides a web console\r\nto allow you to interact with the app in realtime.\r\n\r\nRemember this is still highly experimental and things could change really quickly.\r\n\r\nSo what does the \"app\" look like?\r\n-----------------------------\r\n\r\nA droiuby enabled web app consists of a minimum of 2 files (3 if there is a ruby script)\r\n\r\n- A config file\r\n- The main template file (The template can contain a reference to a ruby script that allows it to handle 'events'\r\n- (optional) A ruby script\r\n\r\nThe structure is designed so that a web server (rails app) can easily host these files\r\n\r\nConfig file. Basically this is where you point the droiuby client in order for it to 'load' the app\r\n\r\n\t<app_descriptor>\r\n\t    <name>Hello World App</name>\r\n\t    <description>An android active app that displays hello world!!!</description>\r\n\t    <launcher_icon>http://www.android.com/images/brand/droid.gif</launcher_icon>\r\n\t    <base_url>http://localhost:3000/hello_world/</base_url>\r\n\t    <main>main.xml</main>\r\n\t</app_descriptor>\r\n\t\r\nRight now it connects to http://localhost:3000/hello_world/ but you can also tell it to load it from\r\nthe apps assets folder (e.g. asset:hello_world/) \r\n\t\r\nmain.xml - The template which renders the layout. Although it looks like HTML each tag corresponds to and android widget.\r\n\r\n\t<activity controller=\"main.rb\">\r\n\t    <layout type=\"linear\" width=\"match\">\r\n\t        <t class=\"exclamation text\" > what!!!!</t>\r\n\t        <t size=\"20\">Different font size</t>\r\n\t        <t size=\"18\">Different font size</t>\r\n\t        <input id=\"test_field\" value=\"This is a text field\"></input>\r\n\t        <button id='store_text' width=\"match\">Store</button>\r\n\t        <button id='test_button' width=\"match\">test</button>\r\n\t        <button alpha=\"0.5\" width=\"match\">test</button>\r\n\t        <img src=\"http://upload.wikimedia.org/wikipedia/en/a/a5/Android-logo.jpg\" width=\"100\"/>\r\n\t        <div id=\"section\">\r\n\t            <layout type=\"relative\" width=\"match\">\r\n\t                <input parent_left=\"1\" id=\"test_field2\" value=\"Test text field 2\"/>\r\n\t                <button id=\"some_button\" right_of=\"#test_field2\" value=\"test button\" width=\"100\">\r\n\t                    BUTTON\r\n\t                </button>    \r\n\t            </layout>\r\n\t        </div>\r\n\t        <div id=\"hello_world_section\">\r\n\t            \r\n\t        </div>\r\n\t    </layout>\r\n\t</activity>\r\n\r\nmain.rb - A ruby script that allows you to hook on to events (notice the controller=\"main.rb\" in the template)\r\n\r\n\tdef on_create\r\n\t  puts 'Hello world from controller file v1'\r\n\t  puts \"Access to current activity = #{$current_activity.getClass.toString}\"\r\n\t  \r\n\t  #access EditText objects and store and load from shared preferences\r\n\t  \r\n\t  V('#test_field').text = 'prefs here'\r\n\t  if _P.contains? :some_text\r\n\t    some_text = _P.get(:some_text)\r\n\t    puts \"Setting text #{some_text} from preferences\"\r\n\t    V('#test_field').text = some_text\r\n\t  end\r\n\t  \r\n\t  #event handling\r\n\t  V('#store_text').on(:click) do |v|\r\n\t    toast 'storing in prefs'\r\n\t    _P.update_attributes!(some_text: V('#test_field').text)\r\n\t  end\r\n\t  \r\n\t  V('#test_button').on(:click) do |v|\r\n\t    puts \"test_button #{v.id} was clicked!!!!!! via on clicked\" \r\n\t    toast 'test_button was clicked!!!'\r\n\t    V('#section').inner = '<t size=\"20\">Clicked!!!!</t>'\r\n\t    \r\n\t  # Animation in android. ruby actually makes it look cool\r\n\t  \r\n\t    V('#section').animate { |t|\r\n\t      t.alpha 0, 1, {duration: 2000}\r\n\t    }.with(\r\n\t      V('#test_button').animate { |t|\r\n\t        t.alpha 1, 0, {duration: 1000}\r\n\t      } \r\n\t    ).start\r\n\t    \r\n\t   # how to define Async tasks\r\n\t    async.perform {\r\n\t      #query stuff and pass it to \"done\" which hooks it internally to onPostExecute\r\n\t      \r\n\t      query_url \"asset:hello_world/_hello_world.xml\"\r\n\t    }.done { |result|\r\n\t      V('#hello_world_section').inner = result\r\n\t    }.start\r\n\t    \r\n\t   end\r\n\t  \r\n\t  \r\n\t  V('#test_button').on(:long_click) { |v|\r\n\t    puts \"This button was long clicked!!!!!!\"\r\n\t    activity_instance_method('hi')\r\n\t    \r\n\t    #yes you can do jquery style \"HTML replacement\"\r\n\t    V('#section').inner = '<t size=\"20\">Long Clicked!!!!</t>'\r\n\t    true #consume long click\r\n\t  }\r\n\t  \r\n\tend\r\n\t\r\n\tdef activity_instance_method(str)\r\n\t  puts \"This instance method was called #{str}\"\r\n\tend\r\n\r\nInstallation\r\n------------\r\n\r\nIssues\r\n------\r\n\r\n- Apps are limited to one activities only since you can't really just create new activities programmatically in android.\r\n- Slow initial loading of apps\r\n\r\nSimilar Projects\r\n----------------\r\n\r\n- ruboto\r\n- phonegap\r\n\r\nCompile Notes\r\n-------------\r\n\r\n- If you want to compile this app yourself make sure eclipse has at least 1.5G (--vmargs -Xmx2G) of heap memory allocated to it as\r\nthe Dex compiler uses a \"lot\" of memory trying to optimize jruby.jar\r\n- A 64-bit OS since you need memory \r\n\r\nIf you think it looks cool or not, I'm happy for some feedback and suggestions\r\n\r\nLicense\r\n-------\r\n Copyright 2012 Joseph Emmanuel Dayo\r\n\r\n   Licensed under the Apache License, Version 2.0 (the \"License\");\r\n   you may not use this file except in compliance with the License.\r\n   You may obtain a copy of the License at\r\n\r\n       http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n   Unless required by applicable law or agreed to in writing, software\r\n   distributed under the License is distributed on an \"AS IS\" BASIS,\r\n   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n   See the License for the specific language governing permissions and\r\n   limitations under the License.\r\n\r\n"}